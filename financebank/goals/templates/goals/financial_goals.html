{% extends "base.html" %}

{% block content %}
<h2>Ваши финансовые цели</h2>
<a href="{% url 'create_goal' %}">Создать новую цель</a>

<ul>
    {% for goal in goals %}
        <li>
            <strong>{{ goal.title }}</strong> - {{ goal.current_amount }} из {{ goal.target_amount }} ({{ goal.progress|floatformat:2 }}%)
            <br> Срок: {{ goal.deadline }}
            
            <form method="post" style="margin-top: 10px;">
                {% csrf_token %}
                <input type="hidden" name="goal_id" value="{{ goal.id }}">
                <input type="number" name="amount" step="0.01" min="0.01" placeholder="Сумма">
                <button type="submit">Добавить</button>
            </form>
        </li>
    {% empty %}
        <p>У вас пока нет финансовых целей.</p>
    {% endfor %}
</ul>

{% if messages %}
    <ul>
        {% for message in messages %}
            <li>{{ message }}</li>
        {% endfor %}
    </ul>
{% endif %}

{% endblock %}